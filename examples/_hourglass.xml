<automaton name="hourglass">
    <comment>change in to change the cycle</comment>
    <inputs>
        <input name="in"/>
    </inputs>
    <variables>
        <variable name="delay" value="1000" type="int"/>
        <variable name="delay1" value="500" type="int"/>
    </variables>
    <states>
        <state name="BOT1"/>
        <state name="BOT2"/>
        <state name="BOT3"/>
        <state name="BOT4"/>
        <state name="MIDDLE" initial="true">
            <code><![CDATA[output("out", "tick");]]></code>
        </state>
        <state name="TOP1"/>
        <state name="TOP2"/>
        <state name="TOP3"/>
        <state name="TOP4"/>
    </states>
    <transitions>
        <transition to="BOT2" from="BOT1">
            <delay>delay</delay>
        </transition>
        <transition to="BOT3" from="BOT2">
            <delay>delay</delay>
        </transition>
        <transition to="BOT4" from="BOT3">
            <delay>delay</delay>
        </transition>
        <transition to="MIDDLE" from="BOT4">
            <delay>delay</delay>
        </transition>
        <transition to="BOT1" from="MIDDLE">
            <delay>delay</delay>
            <condition> <![CDATA[Qtoi(valueof("in")) == 1]]> </condition>
        </transition>
        <transition to="TOP1" from="MIDDLE">
            <delay>delay1</delay>
            <condition> <![CDATA[Qtoi(valueof("in")) == 2]]> </condition>
        </transition>
        <transition to="TOP2" from="TOP1">
            <delay>delay1</delay>
        </transition>
        <transition to="TOP3" from="TOP2">
            <delay>delay1</delay>
        </transition>
        <transition to="TOP4" from="TOP3">
            <delay>delay1</delay>
        </transition>
        <transition to="MIDDLE" from="TOP4">
            <delay>delay1</delay>
        </transition>
    </transitions>
</automaton>
