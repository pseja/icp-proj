<?xml version="1.0" encoding="UTF-8"?>
<automaton name="TOF5s" comment="Timer to off, jednoduchÃ¡ verze.">
    <inputs>
        <input name="in" type="int"/>
    </inputs>
    <outputs>
        <output name="out" type="int"/>
    </outputs>
    <variables>
        <variable name="timeout" type="int" value="5000"/>
    </variables>
    <states>
        <state name="IDLE" initial="true">
            <action>output("out", 0);</action>
        </state>
        <state name="ACTIVE">
            <action>output("out", 1);</action>
        </state>
        <state name="TIMING"/>
    </states>
    <transitions>
        <transition from="IDLE" to="ACTIVE">
            <condition event="in">atoi(valueof("in")) == 1</condition>
        </transition>
        <transition from="ACTIVE" to="TIMING">
            <condition event="in">atoi(valueof("in")) == 0</condition>
        </transition>
        <transition from="TIMING" to="ACTIVE">
            <condition event="in">atoi(valueof("in")) == 1</condition>
        </transition>
        <transition from="TIMING" to="IDLE">
            <delay>timeout</delay>
        </transition>
    </transitions>
</automaton>