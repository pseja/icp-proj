<automaton name="Addition">
    <comment>Adds two inputs and prints the result.</comment>
    <inputs>
        <input name="a"/>
        <input name="b"/>
        <input name="sum_req"/>
    </inputs>
    <outputs>
        <output name="sum"/>
    </outputs>
    <variables>
        <variable name="delay500" type="int" value="500"/>
    </variables>
    <states>
        <state name="IDLE" initial="true">
            <code>inputs["sum_req"] = "0";</code>
        </state>
        <state name="SUM">
            <code>int result = Qtoi(valueof("a")) + Qtoi(valueof("b")); output("sum", result);</code>
        </state>
    </states>
    <transitions>
        <transition from="IDLE" to="SUM">
            <condition event="sum_req">Qtoi(valueof("sum_req")) == 1</condition>
        </transition>
        <transition from="SUM" to="IDLE">
            <delay>delay500</delay>
        </transition>
    </transitions>
</automaton>